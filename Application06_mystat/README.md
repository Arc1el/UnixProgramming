# mystat.c

<h3>요구사항</h3>

파일의 정보를 추출하는 프로그램을 작성하라.

정보를 알고 싶은 파일 이름은 명령행 인자로 받는다.

실행 예] ./mystat a.c

출력 예]

파일명 : a.c

파일 종류 : 일반 파일

접근 권한 : rw-r--r--

UID: 100

파일 수정시간 : 12412545

<h3>구현</h3>

이 프로그램은 파일을 명령행 인자로 받아 해당 파일의 정보를 추출하는 프로그램입니다. octarray배열을 선언하고,0400,0200,0100,0040,0020,0010,0004,0002,0001을 저장합니다.

이는 유저,그룹,기타사용자의 읽기,쓰기,실행권한입니다. perms배열을 선언하고 rwxrwxrwx를 저 장해줍니다. 메인에서 argc,argv를 받고 argc를 검사합니다.

2가아닌경우 사용법을 출력후 종료 합니다. 그후 캐릭터 포인터 filename을 선언하여 argv[1]을 저장해줍니다. 이는 정보를 추출 할 파일입니다.

파일의 종류를 체크하기위해 kind를 선언해주고 stat.h에 정의되어있는 stat구조 체인 stat_buf를 선언해줍니다.

stat함수를 이용해 받은 파일을 stat_buf구조체에 저장합니다. 파일의 종류를 체크하기위해 kind값에 구조체의 st_mode와 S_IFMT를 연산합니다.

st_mode는 파일의 형식과 접근권한을 저장하며 S_IFMT는 16진수로 0xF000이고 st_mode에서 파일의 종 류를 정의한부분을 가져오는 기능을 합니다.

switch-case문을 사용해 저장한 kind값이 FIFO파 일일때, DIR파일일때, REG파일일때를 출력합니다. 권한을 문자열로 출력하기위해 mode_str를 선언합니다.

그후 반복문을통해 MODE_SIZE만큼 루프해줍니다. stat_buf.st_mode와 octarray[i] 를 and연산하여 참이면 mode_str[i]에 perms[i]를 저장합니다.

perms는 rwxrwxrwx이므로 해당 하는 권한을 가진다면 해당하는 문자를 mode_str에 저장할것입니다. 만약 아니라면 mode_str 에 - 를 저장합니다.

배열의 마지막에 널문자를 추가후 %s 로 문자열을 출력합니다. UID와 파 일수정 시간은 stat함수를 호출하여 파일의 정보를 stat_buf에 저장한후

.st_uid와 .st_mtime을 출력해주었습니다.
