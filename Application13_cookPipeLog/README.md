# cookPipeLog

<h3>요구사항</h3>

pipe를 이용한 주문 - 조리 프로그램을 개선하여 

부모 측에서 주문/완료 내용을 별도 파일에 저장하도록 개선

ex)

2019년 11월 25일 10시 10분 21초 주문 전달

2019년 11월 25일 10시 10분 52초 요리 완성

<h3>구현</h3>

로그파일을 열고 할당할 time_fd를 선언합니다. 그후 시간을 기록하기위해 time.h에 정의되어있는 time타입 t와 tm 구조체 tm을 선언합니다.

그후 sprintf를 사용하여 open한 log.txt에 기록해야하므로 문자열을 담을 logbuf를 선언해 줍니다. open함수를 사용하여 log.txt를 열어줍니다.

기록용으로 사용할것이므로 쓰기전용으로 열어주고, 없을시 생성 옵션인 CREAT과 기존파일을 지우지않고 계속하여 추가될수있도록 APPEND도 사용해주고

권한도 0644로 열어줍니 다. 그후 time함수를 사용하여 현재 시간을 t에 저장해줍니다. 그후 localtime 함수를 사용하여 저장하였던 현재시간을

tm 구조체에 지역시간 기준으로 값을 초기화해줍니다. 함수의 매개변수로 들어간 0과 1의경우는 주문 전달과 주 문완료를 다르게 출력하기위해 작성한것이고,

sprintf를 사용하여 logbuf에 tm구조체의 멤버를 접근하여 기록해줍니다. 그 후 write함수를 사용하여

time_fd(log.txt의 파일 디스크립터) logbuf를 쓰기 해줍니다. 모든 작업이 끝나면 open하였던 time_fd를 닫아줌으로써 펑션이 종료됩니다.
